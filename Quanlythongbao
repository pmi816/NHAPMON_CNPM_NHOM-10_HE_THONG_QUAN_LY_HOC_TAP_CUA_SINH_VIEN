# Danh sÃ¡ch lÆ°u thÃ´ng bÃ¡o
announcements = []
from datetime import datetime
from database import announcements

# ThÃªm thÃ´ng bÃ¡o má»›i
def them_thong_bao(tieu_de, noi_dung, doi_tuong):
    thong_bao = {
        "id": len(announcements) + 1,
        "tieu_de": tieu_de,
        "noi_dung": noi_dung,
        "doi_tuong": doi_tuong,
        "thoi_gian": datetime.now().strftime("%Y-%m-%d %H:%M:%S")
    }
    announcements.append(thong_bao)
    return thong_bao

# Láº¥y danh sÃ¡ch thÃ´ng bÃ¡o
def lay_danh_sach_thong_bao():
    return announcements
from flask import Flask, request, jsonify
from models import them_thong_bao, lay_danh_sach_thong_bao

app = Flask(__name__)

# ğŸ‘¨â€ğŸ« Giáº£ng viÃªn Ä‘Äƒng thÃ´ng bÃ¡o
@app.route("/announcements", methods=["POST"])
def dang_thong_bao():
    du_lieu = request.json

    if not du_lieu:
        return jsonify({"loi": "KhÃ´ng cÃ³ dá»¯ liá»‡u"}), 400

    tieu_de = du_lieu.get("tieu_de")
    noi_dung = du_lieu.get("noi_dung")
    doi_tuong = du_lieu.get("doi_tuong")

    if not tieu_de or not noi_dung or not doi_tuong:
        return jsonify({"loi": "Thiáº¿u thÃ´ng tin"}), 400

    thong_bao = them_thong_bao(tieu_de, noi_dung, doi_tuong)
    return jsonify(thong_bao), 201


# ğŸ‘©â€ğŸ“ Sinh viÃªn xem thÃ´ng bÃ¡o
@app.route("/announcements", methods=["GET"])
def xem_thong_bao():
    return jsonify(lay_danh_sach_thong_bao()), 200


if __name__ == "__main__":
    app.run(debug=True)
